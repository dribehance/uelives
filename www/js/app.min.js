angular.module("Uelives",["ngRoute","LocalStorageModule","flow"]).config(["$routeProvider","$httpProvider","$locationProvider","localStorageServiceProvider","config",function(e,t,n,o,r){angular.forEach(r.interceptor,function(t){var n=t.replace(/_[a-z]/g,function(e){return e.split("_")[1].toUpperCase()});n+="Controller",e.when("/"+t,{templateUrl:"templates/"+t+".html",reloadOnSearch:!1,controller:n,resolve:{user:["$q","$location","localStorageService",function(e,n,o){var r=["account"],i=e.defer();return r.includes(t)&&!o.get("token")?(i.reject(),n.path("/signin").replace(),void 0):(i.resolve(),i.promise)}]}})}),e.otherwise("/index"),t.defaults.useXDomain=!0,t.defaults.withCredentials=!0,delete t.defaults.headers.common["X-Requested-With"],o.setStorageCookie(.02),t.interceptors.push("tokenInterceptor")}]).run(["appServices",function(e){e.init()}]),angular.module("Uelives").factory("weixinServices",["$http","$route","$timeout","$rootScope","$location","toastServices","$q","$window","localStorageService","config",function(e,t,n,o,r,i,a,u,c,s){function l(e,t,n,o){wx.onMenuShareTimeline({title:e||p.share.title,link:t||p.share.link,imgUrl:n||p.share.thumbnail,trigger:function(){},success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:e||p.share.title,desc:o||p.share.desc,link:t||p.share.link,imgUrl:n||p.share.thumbnail,type:"link",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:e||p.share.title,desc:o||p.share.desc,link:t||p.share.link,imgUrl:n||p.share.thumbnail,success:function(){},cancel:function(){}}),wx.onMenuShareWeibo({title:e||p.share.title,desc:o||p.share.desc,link:t||p.share.link,imgUrl:n||p.share.thumbnail,success:function(){},cancel:function(){}}),wx.onMenuShareQZone({title:e||p.share.title,desc:o||p.share.desc,link:t||p.share.link,imgUrl:n||p.share.thumbnail,success:function(){},cancel:function(){}})}var d=u.navigator.userAgent.toLowerCase();o.wx_browser=-1!=d.indexOf("micromessenger")?!0:!1;var p={base_url:"https://open.weixin.qq.com/connect/oauth2/authorize",access_token_url:"https://api.weixin.qq.com/sns/oauth2/access_token",userinfo_url:"https://api.weixin.qq.com/sns/userinfo",appid:"wxfc4845662ab85927",secret:"1428c0468f80f233c7f17d887582f2f6",redirect_uri:"http://www.uelives.com/oauth",payment_redirect_uri:"http://www.uelives.com/app/WeixinCommon/weixinPay",response_type:"code",scope:"snsapi_userinfo",state:"weixin",wechat_redirect:"#wechat_redirect",share:{}};return{config:function(){return this.query_signature({current_url:r.absUrl().split("#")[0]}).then(function(e){e.code==s.request.SUCCESS&&e.status==s.response.SUCCESS&&wx.config({debug:!1,appId:p.appid,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","chooseWXPay"]})})},query_signature:function(t){return e({url:s.url+"/app/WeixinCommon/getSignature",method:"GET",params:angular.extend({},s.common_params,t)}).then(function(e){return e.data})},query_payment_signature:function(t){return e({url:s.url+"/app/OrdersManage/comfiyPay",method:"GET",params:angular.extend({},s.common_params,t)}).then(function(e){return e.data})},initWeixinShareEvent:function(e,t,n,o){l(e,t,n,o)},queryAuthorizationCode:function(){var e=p.base_url+"?appid="+p.appid+"&redirect_uri="+encodeURIComponent(p.redirect_uri)+"&response_type="+p.response_type+"&scope="+p.scope+"&state="+p.state+p.wechat_redirect;u.location.href=e},prepare_pay:function(e){var t=p.base_url+"?appid="+p.appid+"&redirect_uri="+encodeURIComponent(p.payment_redirect_uri)+"&response_type="+p.response_type+"&scope="+p.scope+"&state="+JSON.stringify(e)+p.wechat_redirect;u.location.href=t},pay:function(e){i.show(),wx.chooseWXPay({timestamp:e.timestamp,nonceStr:e.nonceStr,"package":e.package_web,signType:e.signType,paySign:e.paySign,success:function(){i.hide(),n(function(){u.location.href=r.protocol()+"://"+r.host()+":"+r.port()+"/mobile/#/order_management_user"},1e3)},cancel:function(){i.hide(),n(function(){o.back()},1e3)},fail:function(){i.hide(),n(function(){o.back()},1e3)}})}}}]),angular.module("Uelives").factory("utilServices",["$q",function(e){var t=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],o=new Uint8Array(t.length),r=0;r<t.length;r++)o[r]=t.charCodeAt(r);return new Blob([o],{type:n})},n=function(n){var o=e.defer(),r=document.createElement("img");try{var i=new FileReader;i.onload=function(e){r.src=e.target.result;var n=document.createElement("canvas"),i=n.getContext("2d");i.drawImage(r,0,0);var a=500,u=500,c=r.width,s=r.height;c>s?c>a&&(s*=a/c,c=a):s>u&&(c*=u/s,s=u),n.width=c,n.height=s;var i=n.getContext("2d");i.drawImage(r,0,0,c,s);var l=n.toDataURL("image/jpeg"),d=t(l);o.resolve(d)},i.readAsDataURL(n)}catch(a){o.resolve(a)}return o.promise};return{resizeFile:n}}]),angular.module("Uelives").factory("userServices",["$rootScope","$http","apiServices","localStorageService","config",function(e,t,n,o,r){return{rsa_key:n._get(angular.extend({},r.common_params,{url:"key/private_key.pem"})),signin:n._get(angular.extend({},r.common_params,{url:r.url+"api_url"})),signup:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserCenter/RegistTelOne",token:o.get("token")})),update_telephone:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserCenter/updateTelephone",token:o.get("token")})),forget:n._get(angular.extend({},r.common_params,{url:r.url+"api_url"})),reset:n._get(angular.extend({},r.common_params,{url:r.url+"api_url"})),get_smscode:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserCenter/GetCode",token:o.get("token")})),query_basicinfo:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserCenter/userInfo",token:o.get("token")})),update_avatar:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserCenter/updateBgImg",token:o.get("token")})),update_userinfo:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserCenter/updateUserInfo",token:o.get("token")})),realname_authen:n._get(angular.extend({},r.common_params,{url:r.url+"api_url",token:o.get("token")})),phone_authen:n._get(angular.extend({},r.common_params,{url:r.url+"api_url",token:o.get("token")})),like:n._get(angular.extend({},r.common_params,{url:r.url+"api_url",token:o.get("token")})),unlike:n._get(angular.extend({},r.common_params,{url:r.url+"api_url",token:o.get("token")})),query_messages:n._get(angular.extend({},r.common_params,{url:r.url+"api_url",token:o.get("token")})),query_message_by_id:n._get(angular.extend({},r.common_params,{url:r.url+"api_url",token:o.get("token")})),query_city:n._get(angular.extend({},r.common_params,{url:"city/city_with_index.json",token:o.get("token")})),query_inter_city:n._get(angular.extend({},r.common_params,{url:"city/inter_city_with_index.json",token:o.get("token")})),query_language:n._get(angular.extend({},r.common_params,{url:"city/language.json",token:o.get("token")})),query_country_code:n._get(angular.extend({},r.common_params,{url:"city/country_code.json",token:o.get("token")})),query_industries:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserCenter/translateFieldList",token:o.get("token")})),create_edu_experience:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserEduExps/addUserEduExps",token:o.get("token")})),query_edu_experience:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserEduExps/userEduExperienceInfo",token:o.get("token")})),update_edu_experience:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserEduExps/editUserEduExps",token:o.get("token")})),remove_edu_experience:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserEduExps/deleteUserEduExps",token:o.get("token")})),create_work_experience:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserWorkExps/addUserWorkExps",token:o.get("token")})),query_work_experience:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserWorkExps/userUserWorkExpInfo",token:o.get("token")})),update_work_experience:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserWorkExps/editUserWorkExps",token:o.get("token")})),remove_work_experience:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserWorkExps/deleteUserWorkExps",token:o.get("token")})),create_cert_experience:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserIdentitys/addUserIdentity",token:o.get("token")})),query_cert_experience:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserIdentitys/userIdentityInfo",token:o.get("token")})),update_cert_experience:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserIdentitys/editUserIdentity",token:o.get("token")})),remove_cert_experience:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserIdentitys/deleteUserIdentity",token:o.get("token")})),query_scenes:n._get(angular.extend({},r.common_params,{url:r.url+"/app/Home/translateSceneList",token:o.get("token")})),query_schedule:n._get(angular.extend({},r.common_params,{url:r.url+"/app/ScheduleManage/scheduleList",token:o.get("token")})),mark_schedule:n._post(angular.extend({},r.common_params,{url:r.url+"/app/ScheduleManage/setTranslateTime",token:o.get("token")})),booking:n._get(angular.extend({},r.common_params,{url:r.url+"/app/OrdersManage/makeOrder",token:o.get("token")})),preview:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserCenter/doneAndLook",token:o.get("token")})),query_qualified_translator:n._get(angular.extend({},r.common_params,{url:r.url+"/app/Home/fullCompletelyUserList",token:o.get("token")})),query_unqualified_translator:n._get(angular.extend({},r.common_params,{url:r.url+"/app/Home/maybeUserList",token:o.get("token")})),query_comments:n._get(angular.extend({},r.common_params,{url:r.url+"/app/Comments/myCommentList",token:o.get("token")})),comment:n._get(angular.extend({},r.common_params,{url:r.url+"/app/Comments/comment",token:o.get("token")})),query_comment_by_order:n._get(angular.extend({},r.common_params,{url:r.url+"/app/OrdersManage/commentDetail",token:o.get("token")})),online_booking:n._get(angular.extend({},r.common_params,{url:r.url+"/app/OrdersManage/submitOrder"})),query_orders:n._get(angular.extend({},r.common_params,{url:r.url+"/app/OrdersManage/myOrderList",token:o.get("token")})),query_order:n._get(angular.extend({},r.common_params,{url:r.url+"/app/OrdersManage/orderDetail",token:o.get("token")})),mark:n._get(angular.extend({},r.common_params,{url:r.url+"/app/OrdersManage/setOrderType",token:o.get("token")})),query_price:n._get(angular.extend({},r.common_params,{url:r.url+"/app/UserCenter/averagePay",token:o.get("token")}))}}]),angular.module("Uelives").factory("uelivesServices",["$rootScope","$http","apiServices","localStorageService","config",function(e,t,n,o,r){return{rsa_key:n._get(angular.extend({},r.common_params,{url:"key/private_key.pem"}))}}]),angular.module("Uelives").factory("tokenInterceptor",["$location","$q","localStorageService","errorServices","config",function(e,t,n,o,r){return{request:function(e){return e},requestError:function(){},response:function(o){var i=t.defer();return o.config.url.indexOf(".html")>0?o:o.data.code==r.request.TOKEN_INVALID?(console.log("TOKEN_INVALID"),n.remove("token"),n.remove("user_id"),e.path("/interpreter_settled").replace(),i.promise):o},responseError:function(e){var n=t.defer();return o.requestError(e.data,e.status,e.headers,e.config),n.promise}}}]),angular.module("Uelives").factory("toastServices",function(){return{show:function(){$(".toast").show()},hide:function(){$(".toast").hide()},start:function(){NProgress.start()},done:function(){NProgress.done()}}}),angular.module("Uelives").factory("errorServices",["$rootScope","$timeout","toastServices",function(e,t,n){return{show:function(t){e.error_msg=t,$(".error-msg").show()},hide:function(){e.error_msg="",$(".error-msg").hide()},autoHide:function(n){e.error_msg=n,$(".error-msg").show(),t(function(){e.error_msg="",$(".error-msg").hide()},3e3)},requestError:function(o,r,i,a){switch(n.hide(),r){case 0:this.autoHide("连接超时");break;case 404:this.autoHide("加载出错，请稍后再试"),t(function(){e.back()},2e3);break;case 500:case 501:case 502:case 503:case 504:case 505:case 506:case 507:case 509:case 510:this.autoHide("服务器连接出错")}console.log("onRequestError output status, data, headers, config"),console.log(r),console.log(o),console.log(i),console.log(a),console.log("onRequestError end")}}}]),angular.module("Uelives").factory("appServices",["$rootScope","$window","$location","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a){var u=function(){},c=function(e,t,n){r.hide(),o.hide(),l(e,t,n)},s=function(){},l=function(){};return{init:function(){e.$on("$routeChangeStart",u),e.$on("$routeChangeSuccess",c),e.$on("$routeChangeError",s),e.go=function(e){n.path(e)},e.back=function(){t.history.back()},"8000"==n.port()&&i.set("token","oeZT9s0s0P1-s5Ns7nQOxfUldSk3"),e.staticImageUrl=a.imageUrl}}}]),angular.module("Uelives").factory("apiServices",["$http","localStorageService",function(e,t){return{_get:function(n){return function(o){return void 0!==n.token&&(n.token=t.get("token")),e({url:n.url,method:"GET",params:angular.extend({},n,o)}).then(function(e){return e.data})}},_post:function(n){return function(o){return void 0!==n.token&&(n.token=t.get("token")),e({url:n.url,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},data:angular.extend({},n,o)}).then(function(e){return e.data})}}}}]),angular.module("Uelives").directive("uploader",["$timeout","localStorageService","toastServices","errorServices","config",function(e,t,n,o,r){return{restrict:"E",template:function(e,t){var n="",o=t.rate;return n="<imageview center-only data-rate='"+o+"' src='src'></imageview>"},controller:["$scope","$element","$attrs",function(e,o,i){var a,u;e.$on("flow::filesSubmitted",function(e,o){o.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return u=e,e}),a=(new Date).getTime()+u,o.opts.target=r.url+"/app/UserCenter/updatePic",o.opts.testChunks=!1,o.opts.fileParameterName="image_01",o.opts.query={invoke:"h5",token:t.get("token"),filename:a},n.show(),o.upload()}),e.$on("flow::fileAdded",function(){}),e.src="../images/default.png",i.default&&(e.src=i.default),i.$observe("src",function(t){t&&(e.src=r.imageUrl+t)}),e.$on("flow::fileSuccess",function(){e.src=r.imageUrl+a,n.hide()})}],link:function(){}}}]),angular.module("Uelives").directive("showOnLoaded",function(){return{link:function(e,t){$(t).css({visibility:"hidden"}),t.bind("load",function(){console.log("loaded");var n=parseFloat(e.$eval($(t).parent().attr("data-rate")));if(!n)return console.log("unexpect rate"),void 0;var o=$(t).width()/$(t).height();n>o?$(t).css({height:"100%",width:"auto"}):$(t).css({height:"auto",width:"100%"}),$(t).parent().css({background:"none"}),$(t).css({visibility:"visible"})})}}}),angular.module("Uelives").directive("pagetitle",["$document",function(e){return{restrict:"E",scope:{title:"="},link:function(t){e[0].title=t.title;var n=$("body"),o=$('<iframe src="/favicon.ico"></iframe>');o.on("load",function(){setTimeout(function(){o.off("load").remove()},0)}).appendTo(n)}}}]),angular.module("Uelives").directive("onRepeatDone",function(){return{restrict:"A",link:function(e,t){e.$last&&e.$emit("onRepeatDone",t)}}}),angular.module("Uelives").directive("onload",function(){return{restrict:"A",link:function(e,t){$(t).css({opacity:0}),$(t).bind("load",function(){$(t).css({opacity:1})})}}}),angular.module("Uelives").directive("mobilepicker",["$timeout",function(e){return{restrict:"E",scope:{options:"="},template:"<input type='text' name='picker' placeholder='{{options.placeholder}}' class='full-width' readonly ng-model='options.value'>",link:function(t,n){var o={beginyear:1950,endyear:(new Date).getFullYear(),days:["周日","周一","周二","周三","周四","周五","周六"],curdate:!1,theme:"date",event:"click",callBack:function(e){t.options.value="month"==t.options.theme?e.y+"-"+e.M:e.y+"-"+e.M+"-"+e.d}};e(function(){$(n).find("input").datePicker(angular.extend({},o,t.options))},0)}}}]),angular.module("Uelives").directive("imageview",["$timeout",function(e){return{restrict:"E",scope:{src:"="},controller:["$scope","$element","$attrs",function(t,n,o){function r(e){$(e.target).css({width:"auto",height:"auto"});var n=$(e.target),o=n.width(),r=n.height(),i=parseFloat(o)/parseFloat(r);i<t.rate?(o=t.width,r=t.width/i,n.css({display:"inline-block",height:r,width:o,"margin-top":-(r-t.height)/2})):(r=t.height,o=r*i,n.css({display:"inline-block",height:r,width:o,"margin-left":-(o-t.width)/2})),n.parent().css({background:"none"}),n.css({visibility:"visible"})}function i(e){var n=$(e.target),o=n.width(),r=n.height(),i=parseFloat(o)/parseFloat(r);i<t.rate?n.css({display:"inline-block",height:"100%",width:"auto"}):n.css({display:"inline-block",height:"auto",width:"100%"}),n.parent().css({background:"none"}),n.css({visibility:"visible"})}return t.bg_image="../images/default.png",t.rate=parseFloat(o.rate),t.width=n.parent().width()||$(window).width(),t.height=t.width/t.rate,t.rate?(this.show_center_on_loaded=function(t){r(t),e(function(){r(t)},100)},this.show_on_loaded=function(t){i(t),e(function(){i(t)},100)},void 0):(console.log("unexpect rate"),void 0)}],template:function(e){var t="<img ng-src='{{src}}' show-center-on-loaded err-src='../images/default.png'>";return void 0==$(e).attr("center-only")&&(t="<img ng-src='{{src}}' show-on-loaded err-src='../images/default.png'>"),t},link:function(e,t){var n={display:"block",width:e.width,overflow:"hidden","text-align":"center","background-image":"url("+e.bg_image+")","background-position":"center center","background-repeat":"no-repeat",height:e.height,overflow:"hidden"};$(t).css(n)}}}]).directive("showOnLoaded",function(){return{restrict:"A",require:"^imageview",link:function(e,t,n,o){t.bind("load",o.show_on_loaded)}}}).directive("showCenterOnLoaded",function(){return{restrict:"A",require:"^imageview",link:function(e,t,n,o){t.bind("load",o.show_center_on_loaded)}}}),angular.module("Uelives").directive("dribehanceHeader",function(){return{restrict:"E",templateUrl:"templates/header.html",scope:{title:"=",backAction:"="},link:function(){}}}),angular.module("Uelives").directive("dribehanceFooter",function(){return{restrict:"E",templateUrl:"templates/footer.html",scope:{active:"="},link:function(){}}}),angular.module("Uelives").directive("errSrc",function(){return{restrict:"A",link:function(e,t,n){$(t).bind("error",function(){$(t).attr("src",n.errSrc)})}}}),angular.module("Uelives").directive("countdown",["$interval",function(e){return{restrict:"E",scope:{countdown:"=",disabled:"=countdownDisabled"},link:function(t,n){function o(){var n=t.countdown.message,o=parseFloat(t.countdown.count)?parseFloat(t.countdown.count):60;r=!0,t.$apply(function(){t.countdown.message=o--,t.countdown.message=o+"s重新获取",t.countdown.mode="disabled",t.countdown.reset=!1,t.countdown.callback()});var i=e(function(){t.countdown.message=o--,t.countdown.message=o+"s重新获取",(0>o||t.countdown.reset)&&(e.cancel(i),t.countdown.message=n,r=!1)},1e3)}var r=!1;$(n).bind("click",function(){t.disabled||r||o()})}}}]),angular.module("Uelives").directive("confirm",function(){return{restrict:"E",scope:{confirm:"="},templateUrl:"templates/confirm.html",link:function(e,t){e.confirm=angular.extend({},{title:"Tips",content:"Are You Sure?",content_type:"content",open:function(){$(t).show()},cancel:function(){$(t).hide(),"function"==typeof e.confirm.cancle_callback&&e.confirm.cancle_callback()},ok:function(){$(t).hide(),"function"==typeof e.confirm.ok_callback&&(e.confirm.ok_callback(),e.confirm.content_type="content")}},e.confirm)}}}),angular.module("Uelives").directive("banner",function(){return{restrict:"E",transclude:!0,template:"<div class='carousel-holder owl-carousel theme' ng-transclude></div>",link:function(e,t){var n={autoplay:!0,items:1};n=angular.extend({},n,e.$eval($(t).attr("data-options")));var o=parseFloat(e.$eval($(t).attr("data-rate"))),r={display:"block",width:$(t).parent().width()||$(window).width(),height:($(t).parent().width()||$(window).width())/o};$(t).css(r),e.$on("onRepeatDone",function(){$(t).find(".carousel-holder").owlCarousel(n)})}}}),angular.module("Uelives").controller("workingTypeController",["$scope","$rootScope","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u){e.input={},e.select_scene=function(e){var o=a.get("cache");o&&n.cache_key&&(o[n.cache_key]=e.name,a.set("cache",o)),t.back()},i.show(),o.query_scenes({type:1}).then(function(t){var o=a.get("cache");i.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?(e.scenes=t.Result.TranslateScenes,e.scenes.map(function(e){return o&&o[n.cache_key]&&-1!=o[n.cache_key].indexOf(e.name)&&(e.select=!0),e})):r.autoHide(t.message)})}]),angular.module("Uelives").controller("weixinController",["$scope","$rootScope","$location","$timeout","weixinServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c){t.wx_browser&&r.config().then(function(){a.show(),r.query_payment_signature({orders_id:u.get("orders_id"),code:u.get("code")}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?r.pay(e):t.back()})})}]),angular.module("Uelives").controller("updateTelephoneController",["$scope","$timeout","$location","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u){e.input={},e.countdown={message:"获取验证码"},e.countdown.callback=function(){i.show(),o.get_smscode({telephone:e.input.telephone,country_code:e.input.country_code.code}).then(function(t){i.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?r.autoHide(t.message):(e.countdown.reset=!0,r.autoHide(t.message))})},e.ajaxForm=function(){i.show(),o.update_telephone({country_code:e.input.country_code.code,telephone:e.input.telephone,tel_code:e.input.code}).then(function(e){i.hide(),e.code==u.request.SUCCESS&&e.status==u.response.SUCCESS?(r.autoHide(e.message),t(function(){n.path("information").replace()},2e3)):r.autoHide(e.message)})},e.input.country_code={name:"中国",code:"+86"},e.cache_and_go=function(t,o){a.set("cache",e.input),n.path(t).search("cache_key",o)};var c=a.get("cache");c&&(e.input=angular.extend({},e.input,c));var s=a.get("server");e.input.wechat=s&&s.wechat||""}]),angular.module("Uelives").controller("selfBookingController",["$scope","$rootScope","$filter","$location","$routeParams","$timeout","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c,s,l){e.input={},e.input.sex=1,e.select_gender=function(t){e.input.sex=t},e.agree=!1,e.is_agree=function(){e.agree=!e.agree},e.replace_hash=function(e){return e&&e.replace(/#/g,"、")},e.countdown={message:"获取验证码"},e.input.country_code={name:"中国",code:"+86"},e.countdown.callback=function(){c.show(),a.get_smscode({telephone:e.input.telephone,country_code:e.input.country_code.code}).then(function(t){c.hide(),t.code==l.request.SUCCESS&&t.status==l.response.SUCCESS?u.autoHide(t.message):(e.countdown.reset=!0,u.autoHide(t.message))})},e.format_time=function(e,t){return n("date")(e,t)},e.cache_and_go=function(t,n){s.set("cache",e.input),o.path(t).search("cache_key",n)};var d=s.get("cache");d&&(e.input=angular.extend({},e.input,d),e.input.choice_time&&(e.input.schedule_from=e.format_time(e.input.choice_time[0],"MM-dd")),e.input.choice_time&&(e.input.schedule_to=e.format_time(e.input.choice_time[e.input.choice_time.length-1],"MM-dd")),e.input.choice_time&&(e.input.schedule_total=e.input.choice_time.length));s.get("server");e.ajaxForm=function(){c.show(),a.online_booking({city:e.input.city,from_language:e.input.language.from,to_language:e.input.language.to,translate_scene:e.input.scenes,order_time:e.input.choice_time.join("#"),translate_day:e.input.schedule_total,translate_field:e.input.industry,sex:e.input.sex,type:3,orders_id:r.order_id,translate_user_id:r.id,work_content:e.input.work_content,other_require:e.input.other_require,order_name:e.input.nickname,order_company:e.input.company,order_telephone:e.input.telephone,order_wechat:e.input.wechat,money:e.input.money,msg_code:e.input.smscode,country_code:e.input.country_code.code}).then(function(e){c.hide(),e.code==l.request.SUCCESS&&e.status==l.response.SUCCESS?(u.autoHide(e.message),i(function(){s.remove("cache"),t.back()},2e3)):u.autoHide(e.message)})}}]),angular.module("Uelives").controller("schedulePreviewController",["$scope","$rootScope","$routeParams","$timeout","$route","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c,s){e.input={},u.show(),i.query_schedule({user_id:n.id||"0"}).then(function(t){u.hide(),t.code==s.request.SUCCESS&&t.status==s.response.SUCCESS?e.schedules=t.calendarBeans:a.autoHide(t.message)}),e.append_class=function(e,t){return 0==t?"margin-left-"+e.week:void 0},e.parse_time=function(e){return e.schedule_date.split("-")[2]}}]),angular.module("Uelives").controller("scheduleController",["$scope","$rootScope","$routeParams","$timeout","$route","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c,s){c.get("cache");e.input={},u.show(),i.query_schedule({user_id:n.id||"0"}).then(function(t){u.hide(),t.code==s.request.SUCCESS&&t.status==s.response.SUCCESS?e.schedules=t.calendarBeans:a.autoHide(t.message)}),e.parse_time=function(e){return e.schedule_date.split("-")[2]},e.append_class=function(e,t){return 0==t?"margin-left-"+e.week:void 0},e.active=function(e){return 1!=e.schedule_state?3==e.schedule_state?e.schedule_state=2:2==e.schedule_state?e.schedule_state=3:void 0:void 0},e.mark_schedule=function(){var t=[];return angular.forEach(e.schedules,function(e){t=t.concat(e.scheduleBeans)}),t=t.filter(function(e){return 1!=e.schedule_state}).map(function(e){return e.schedule_date+"@"+e.schedule_state}),0==t.length?(a.autoHide("请选择时间"),void 0):(u.show(),i.mark_schedule({choice_currentdates:t.join("#")}).then(function(e){u.hide(),e.code==s.request.SUCCESS&&e.status==s.response.SUCCESS?(a.autoHide(e.message),o(function(){r.reload()},2e3)):a.autoHide(e.message)}),void 0)}}]),angular.module("Uelives").controller("scenesController",["$scope","$rootScope","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u){e.input={},e.select_scene=function(t){var n=e.scenes.filter(function(e){return e.select}).map(function(e){return e.name});return n.length>1&&!t.select?(r.autoHide("最多只能选择两个"),void 0):(t.select=!t.select,void 0)},i.show(),o.query_scenes({type:2}).then(function(t){var o=a.get("cache");i.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?(e.scenes=t.Result.TranslateScenes,e.scenes.map(function(e){return o&&o[n.cache_key]&&-1!=o[n.cache_key].indexOf(e.name)&&(e.select=!0),e})):r.autoHide(t.message)}),e.save=function(){var o=e.scenes.filter(function(e){return e.select}).map(function(e){return e.name});if(0==o.length)return r.autoHide("请选择擅长领域"),void 0;var i=a.get("cache");i&&n.cache_key&&(i[n.cache_key]=o.join("#"),a.set("cache",i)),t.back()}}]),angular.module("Uelives").controller("relatedIndustryController",["$scope","$routeParams","$rootScope","$rootScope","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,n,o,r,i,a,u){e.input={},e.select=function(e){e.select=!e.select},i.show(),o.query_industries().then(function(n){var o=a.get("cache");i.hide(),n.code==u.request.SUCCESS&&n.status==u.response.SUCCESS?(e.industries=n.Result.TranslateFields,e.industries.map(function(e){return o&&o[t.cache_key]&&-1!=o[t.cache_key].indexOf(e.name)&&(e.select=!0),e})):r.autoHide(n.message)}),e.save=function(){var o=e.industries.filter(function(e){return e.select}).map(function(e){return e.name});if(0==o.length)return r.autoHide("请选择擅长领域"),void 0;var i=a.get("cache");i&&t.cache_key&&(i[t.cache_key]=o.join("#"),a.set("cache",i)),n.back()}}]),angular.module("Uelives").controller("previewCommentController",["$scope","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a){r.show(),n.query_comment_by_order({orders_id:t.id}).then(function(t){r.hide(),t.code==a.request.SUCCESS&&t.status==a.response.SUCCESS?e.comment=t.Result.Comment:o.autoHide(t.message)})}]),angular.module("Uelives").controller("orderWaitController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Uelives").controller("orderManagementUserController",["$scope","$routeParams","$route","$timeout","$filter","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c,s){e.input={type:t.type||"2",status:"wait"},e.orders=[],e.page={pn:1,page_size:10,message:"点击加载更多",order_type:e.input.type},e.loadMore=function(){e.no_more||(u.show(),e.page.message="正在加载...",i.query_orders(e.page).then(function(t){u.hide(),e.page.message="点击加载更多",t.code==s.request.SUCCESS&&t.status==s.response.SUCCESS?(e.orders=e.orders.concat(t.Result.OrderList.list),e.no_more=e.orders.length==t.Result.OrderList.totalRow?!0:!1):a.autoHide("服务器错误"),e.no_more&&(e.page.message="加载完成，共加载"+e.orders.length+"条数据"),e.page.pn++}))},e.loadMore(),e.active_tab=function(t){e.input.type=t,e.page={pn:1,page_size:10,message:"点击加载更多",order_type:e.input.type},e.orders=[],e.no_more=!1,e.loadMore()},e.format_time=function(e,t){return r("date")(e,t)},e.replace_hash=function(e){return e&&e.replace(/#/g,"、")},e.parse_time=function(t){return t.split("#").map(function(t){return e.format_time(t,"yyyy.MM.dd")}).join("-")},e.mark=function(t,r){var c=["","接受","拒绝","收款"];e.confirm.content=c[t],e.confirm.open(),e.confirm.cancle_callback=function(){},e.confirm.ok_callback=function(){u.show(),i.mark({orders_id:r.orders_id,transaction_id:r.transaction_id,type:t}).then(function(e){u.hide(),e.code==s.request.SUCCESS&&e.status==s.response.SUCCESS?(a.autoHide(e.message),o(function(){n.reload()},2e3)):a.autoHide(e.message)})}}}]),angular.module("Uelives").controller("orderManagementInterpreterController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Uelives").controller("orderFinishControllerController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Uelives").controller("orderController",["$scope","$routeParams","$filter","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u){i.show(),o.query_order({orders_id:t.id}).then(function(t){i.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?(e.order=t.Result.Orders,e.order.schedule_from=e.format_time(e.order.order_time.split("#")[0],"MM-dd"),e.order.schedule_to=e.format_time(e.order.order_time.split("#")[e.order.order_time.split("#").length-1],"MM-dd")):r.autoHide(t.message)}),e.format_time=function(e,t){return n("date")(e,t)},e.parse_time=function(t){return t.split("#").map(function(t){return e.format_time(t,"yyyy.MM.dd")}).join("-")}}]),angular.module("Uelives").controller("orderConfirmController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Uelives").controller("orderCancelController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Uelives").controller("onlinePreviewController",["$scope","$routeParams","$location","$rootScope","$filter","weixinServices","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c,s,l){e.input={},c.show(),a.query_basicinfo({type:t.type,ta_user_id:t.id}).then(function(r){if(c.hide(),r.code==l.request.SUCCESS&&r.status==l.response.SUCCESS){e.user=r.Result.UserInfo;
var a="【悠译】预约全球译员"+e.user.nickname+"——"+e.user.city+" "+e.user.first_language+"翻译",s=n.protocol()+"://"+n.host()+":"+n.port()+"/mobile/#/interpreter_detail?type=2&id="+t.id,d=o.staticImageUrl+e.user.image_01,p=e.user.translate_level+"、"+e.user.translate_year+"，"+e.user.mother_language+" 母语 | "+e.user.first_language+" "+e.user.first_language_level+" | "+e.user.second_language+" "+e.user.second_language_level+"，"+e.user.sex+" "+e.user.edu+"，"+e.user.good_field.split("#").filter(function(e,t){return 3>t}).join("、");o.wx_browser&&i.config().then(function(){i.initWeixinShareEvent(a,s,d,p)})}else u.autoHide(r.message)}),e.format_time=function(e,t){return r("date")(e,t)},e.replace_hash=function(e){return e&&e.replace(/#/g,"、")}}]),angular.module("Uelives").controller("onlineBookingController",["$scope","$filter","$location","$routeParams","$timeout","$window","weixinServices","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c,s,l,d){e.input={},e.input.sex=1,e.select_gender=function(t){e.input.sex=t},e.check=function(t){e.input.check=t},e.agree=!1,e.is_agree=function(){e.agree=!e.agree},e.countdown={message:"获取验证码"},e.input.country_code={name:"中国",code:"+86"},e.countdown.callback=function(){s.show(),u.get_smscode({telephone:e.input.telephone,country_code:e.input.country_code.code}).then(function(t){s.hide(),t.code==d.request.SUCCESS&&t.status==d.response.SUCCESS?c.autoHide(t.message):(e.countdown.reset=!0,c.autoHide(t.message))})},e.input.country_code={name:"中国",code:"+86"},e.cache_and_go=function(t,o){l.set("cache",e.input),n.path(t).search("cache_key",o)},e.replace_hash=function(e){return e&&e.replace(/#/g,"、")},s.show(),u.query_basicinfo({type:"2",ta_user_id:o.id}).then(function(t){s.hide(),t.code==d.request.SUCCESS&&t.status==d.response.SUCCESS?e.user=t.Result.UserInfo:c.autoHide(t.message)}),e.format_time=function(e,n){return t("date")(e,n)},e.cache_and_go=function(t,o){l.set("cache",e.input),n.path(t).search("cache_key",o)},e.get_total_money=function(t){return parseFloat(e.input.schedule_total)*parseFloat(t)},$("form[name='bookingForm']").find("input,textarea").focus(function(){$(".pay").css({position:"static"})}),$("form[name='bookingForm']").find("input,textarea").blur(function(){$(".pay").css({position:"fixed"})});var p=l.get("cache");p&&(e.input=angular.extend({},e.input,p),e.input.choice_time&&(e.input.schedule_from=e.format_time(e.input.choice_time[0],"MM-dd")),e.input.choice_time&&(e.input.schedule_to=e.format_time(e.input.choice_time[e.input.choice_time.length-1],"MM-dd")),e.input.choice_time&&(e.input.schedule_total=e.input.choice_time.length));l.get("server");e.ajaxForm=function(){return e.agree?(s.show(),u.online_booking({city:e.input.city,from_language:e.input.language.from,to_language:e.input.language.to,translate_scene:e.input.scenes,order_time:e.input.choice_time.join("#"),translate_day:e.input.schedule_total,translate_field:e.input.industry,sex:e.input.sex,type:e.input.check,orders_id:o.order_id,translate_user_id:o.id,work_content:e.input.work_content,other_require:e.input.other_require,order_name:e.input.nickname,order_company:e.input.company,order_telephone:e.input.telephone,order_wechat:e.input.wechat,money:e.get_total_money(e.user.pay_day),msg_code:e.input.smscode,country_code:e.input.country_code.code,token:l.get("token")}).then(function(e){s.hide(),e.code==d.request.SUCCESS&&e.status==d.response.SUCCESS?(c.autoHide(e.message),a.prepare_pay({id:o.order_id})):c.autoHide(e.message)}),void 0):(c.autoHide("请同意使用条款"),void 0)}}]),angular.module("Uelives").controller("moneyController",["$scope","$rootScope","$timeout","$location","$filter","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c,s){var l=s.get("cache");e.input=l,e.ajaxForm=function(){l&&i.cache_key&&(l[i.cache_key]=e.input.pay_day,s.set("cache",l)),t.back()}}]),angular.module("Uelives").controller("letterIndexController",["$scope","$timeout","errorServices","toastServices","localStorageService","config",function(e,t){e.$on("onRepeatDone",function(){var n=$(".letter"),o=n.find("span"),r=o.height()+parseFloat(o.css("padding-top")),i=new Hammer(n[0]);i.get("pan").set({direction:Hammer.DIRECTION_ALL}),i.on("panleft panright panup pandown tap press",function(n){var o=Math.round(n.deltaY/r);e.navgation_to($(n.target),o),"tap"==n.type&&t(function(){e.remove_tip()},1e3)}),i.on("panend",function(){e.remove_tip()}),e.navgation_to=function(t,n){var r=o.index(t)+n;r=Math.min(r,o.length-1),r=Math.max(0,r),e.$emit("letterIndexChange",o.eq(r).text())},e.remove_tip=function(){e.letter_index="",e.$apply(function(){})},e.$on("letterIndexChange",function(t,n){e.$apply(function(){e.letter_index=n}),$("body").scrollTop($("[data-index="+n+"]").offset().top)})})}]),angular.module("Uelives").controller("languagesController",["$scope","$routeParams","$rootScope","$timeout","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u){e.input={},r.query_language().then(function(t){e.languages=t}),e.select_language=function(o){e.input.tag=o;var r=u.get("cache");r&&t.cache_key&&(r[t.cache_key]=o,u.set("cache",r)),n.back()},e.parse_key=function(e){return e.substring(0,2)}}]),angular.module("Uelives").controller("interpreterSettledController",["$scope","$timeout","$location","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u){e.input={},e.countdown={message:"获取验证码"},e.countdown.callback=function(){i.show(),o.get_smscode({telephone:e.input.telephone,country_code:e.input.country_code.code}).then(function(t){i.hide(),t.code==u.request.SUCCESS&&t.status==u.response.SUCCESS?r.autoHide(t.message):(e.countdown.reset=!0,r.autoHide(t.message))})},e.ajaxForm=function(){return e.agree?(i.show(),o.signup({country_code:e.input.country_code.code,telephone:e.input.telephone,tel_code:e.input.code,weChat:e.input.wechat}).then(function(e){i.hide(),e.code==u.request.SUCCESS&&e.status==u.response.SUCCESS?(r.autoHide(e.message),a.set("token",e.token),t(function(){n.path("information").replace()},2e3)):r.autoHide(e.message)}),void 0):(r.autoHide("请阅读并同意《译员协议》"),void 0)},e.input.country_code={name:"中国",code:"+86"},e.agree=!1,e.is_agree=function(){e.agree=!e.agree},e.cache_and_go=function(t,o){a.set("cache",e.input),n.path(t).search("cache_key",o)};var c=a.get("cache");c&&(e.input=angular.extend({},e.input,c));var s=a.get("server");e.input.wechat=s&&s.wechat||""}]),angular.module("Uelives").controller("interpreterListController",["$scope","$filter","$location","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c){e.input={all:"1",price:"0",comment:"0"},e.qualified_translators=[],e.format_time=function(e,n){return t("date")(e,n)};var s=u.get("cache");s&&(e.input=angular.extend({},e.input,s),e.input.choice_time&&(e.input.schedule_from=e.format_time(e.input.choice_time[0],"MM-dd")),e.input.choice_time&&(e.input.schedule_to=e.format_time(e.input.choice_time[e.input.choice_time.length-1],"MM-dd")),e.input.choice_time&&(e.input.schedule_total=e.input.choice_time.length)),e.qualified_page={pn:1,page_size:10,message:"点击加载更多",city:e.input.city,from_language:e.input.language.from,to_language:e.input.language.to,translate_scene:e.input.scenes,order_time:e.input.choice_time.join("#"),translate_day:e.input.schedule_total,translate_field:e.input.industry,sex:e.input.sex,pay_day:e.input.price,total_score:e.input.comment,multiple_order:e.input.all},e.load_qualified=function(){e.no_qualified||(a.show(),e.qualified_page.message="正在加载...",r.query_qualified_translator(e.qualified_page).then(function(t){a.hide(),e.qualified_page.message="点击加载更多",t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?(e.qualified_count=t.total_user,e.qualified_translators=e.qualified_translators.concat(t.Result.Users.list),e.no_qualified=e.qualified_translators.length==t.Result.Users.totalRow?!0:!1):i.autoHide("服务器错误"),e.no_qualified&&e.load_unqualified(),e.qualified_page.pn++}))},e.load_qualified(),e.unqualified_page={pn:1,page_size:10,message:"点击加载更多",city:e.input.city,from_language:e.input.language.from,to_language:e.input.language.to,translate_scene:e.input.scenes,order_time:e.input.choice_time.join("#"),translate_day:e.input.schedule_total,translate_field:e.input.industry,sex:e.input.sex,pay_day:e.input.price,total_score:e.input.comment,multiple_order:e.input.all},e.unqualified_translators=[],e.load_unqualified=function(){a.show(),e.unqualified_page.message="正在加载...",r.query_unqualified_translator(e.unqualified_page).then(function(t){a.hide(),e.unqualified_page.message="点击加载更多",t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?(e.unqualified_count=t.total_user,e.unqualified_translators=e.unqualified_translators.concat(t.Result.Users.list),e.no_unqualified=e.unqualified_translators.length==t.Result.Users.totalRow?!0:!1):i.autoHide("服务器错误"),e.no_unqualified,e.unqualified_page.pn++})},e.go=function(e){n.path("interpreter_detail").search({id:e,order_id:o.order_id})};var l=e.input.all,d=sort_3=0;e.sort_by_all=function(){e.input.price=d=sort_3=0,e.input.comment=d=sort_3=0,e.input.all=l++%2+1,e.reset(),e.load_qualified()},e.sort_by_price=function(){e.input.all=l=sort_3=0,e.input.comment=l=sort_3=0,e.input.price=++d%2+1,e.reset(),e.load_qualified()},e.sort_by_comment=function(){e.input.all=l=d=0,e.input.price=l=d=0,e.input.comment=++sort_3%2+1,e.reset(),e.load_qualified()},e.reset=function(){e.qualified_page={pn:1,page_size:10,message:"点击加载更多",city:e.input.city,from_language:e.input.language.from,to_language:e.input.language.to,translate_scene:e.input.scenes,order_time:e.input.choice_time.join("#"),translate_day:e.input.schedule_total,translate_field:e.input.industry,sex:e.input.sex,pay_day:e.input.price,total_score:e.input.comment,multiple_order:e.input.all},e.unqualified_page={pn:1,page_size:10,message:"点击加载更多",city:e.input.city,from_language:e.input.language.from,to_language:e.input.language.to,translate_scene:e.input.scenes,order_time:e.input.choice_time.join("#"),translate_day:e.input.schedule_total,translate_field:e.input.industry,sex:e.input.sex,pay_day:e.input.price,total_score:e.input.comment,multiple_order:e.input.all},e.qualified_translators=[],e.unqualified_translators=[],e.qualified_count=0,e.unqualified_count=0,e.no_qualified=!1,e.no_unqualified=!1}}]),angular.module("Uelives").controller("interpreterLevelController",["$scope","$rootScope","$timeout","$location","$filter","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c,s,l){var d=s.get("cache");e.input=d,e.check=function(n){e.input.translate_level=n,d&&i.cache_key&&(d[i.cache_key]=e.input.translate_level,s.set("cache",d)),t.back()},c.show(),a.query_price({user_id:s.get("user_id")}).then(function(t){c.hide(),t.code==l.request.SUCCESS&&t.status==l.response.SUCCESS?e.price=t:u.autoHide(t.message)})}]),angular.module("Uelives").controller("interpreterEvaluateController",["$scope","$rootScope","$timeout","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c){e.input={},a.show(),r.query_basicinfo({type:"2",ta_user_id:o.id}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?e.user=t.Result.UserInfo:i.autoHide(t.message)}),e.single_check=function(t,n){e.input[t]=n},e.active=function(t){e.input.star=t},e.ajaxForm=function(){a.show(),r.comment({orders_id:o.order_id,comment_star:e.input.star,note:e.input.note,service:e.input.service,profession:e.input.profession,tongue:e.input.tongue}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?(i.autoHide(e.message),n(function(){t.back()},2e3)):i.autoHide(e.message)})}}]),angular.module("Uelives").controller("interpreterDetailController",["$scope","$routeParams","$filter","$location","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c){e.input={},a.show(),r.query_basicinfo({type:"2",ta_user_id:t.id}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?e.user=t.Result.UserInfo:i.autoHide(t.message)}),e.format_time=function(e,t){return n("date")(e,t)},e.comments=[],e.page={pn:1,page_size:10,message:"点击加载更多",user_id:t.id},e.loadMore=function(){e.no_more||(a.show(),e.page.message="正在加载...",r.query_comments(e.page).then(function(t){a.hide(),e.page.message="点击加载更多",t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?(e.total_score=t.comment_star,e.comments=e.comments.concat(t.Result.Comments.list),e.no_more=e.comments.length==t.Result.Comments.totalRow?!0:!1):i.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore(),e.go=function(){o.path("online_booking").search({id:t.id,order_id:t.order_id})},e.replace_hash=function(e){return e&&e.replace(/#/g,"、")},e.cache_and_go=function(t,n){u.set("cache",angular.extend({},u.get("cache")),e.input),o.path(t).search("cache_key",n)}}]),angular.module("Uelives").controller("informationController",["$scope","$filter","$location","$timeout","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c){e.input={},a.show(),r.query_basicinfo({type:"1"}).then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?e.user=t.Result.UserInfo:i.autoHide(t.message)}),e.input.flow={},e.update_avatar=function(){a.show(),r.update_avatar({fileName:e.input.flow.opts.query.filename}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?i.autoHide(e.message):i.autoHide(e.message)})},e.cache_and_go=function(t,o){u.set("cache",e.input),n.path(t).search("cache_key",o)},e.format_time=function(e,n){return t("date")(e,n)},e.replace_hash=function(e){return e&&e.replace(/#/g,"、")},e.preview=function(){a.show(),r.preview().then(function(t){a.hide(),t.code==c.request.SUCCESS&&t.status==c.response.SUCCESS?n.path("online_preview").search("id",e.user.user_id):i.autoHide(t.message)})},u.remove("cache")}]),angular.module("Uelives").controller("indexController",["$scope","$filter","$location","$timeout","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c){e.input={},e.input.city="深圳",e.input.language={from:"中文",to:""},e.input.scenes="",e.input.industry="",e.input.sex="不限",e.select_gender=function(t){e.input.sex=t},e.format_time=function(e,n){return t("date")(e,n)},e.replace_hash=function(e){return e&&e.replace(/#/g,"、")},e.cache_and_go=function(t,o){u.set("cache",e.input),n.path(t).search("cache_key",o)};var s=new Date,l=new Date;s.setDate(s.getDate()+1),l.setDate(l.getDate()+2),e.input.choice_time=[e.format_time(s,"yyyy-MM-dd"),e.format_time(l,"yyyy-MM-dd")];var d=u.get("cache");d&&(e.input=angular.extend({},e.input,d)),e.input.choice_time&&(e.input.schedule_from=e.format_time(e.input.choice_time[0],"MM-dd")),e.input.choice_time&&(e.input.schedule_to=e.format_time(e.input.choice_time[e.input.choice_time.length-1],"MM-dd")),e.input.choice_time&&(e.input.schedule_total=e.input.choice_time.length),e.ajaxForm=function(){u.set("cache",e.input),a.show(),r.booking({city:e.input.city,from_language:e.input.language.from,to_language:e.input.language.to,translate_scene:e.input.scenes,order_time:e.input.choice_time.join("#"),translate_day:e.input.schedule_total,translate_field:e.input.industry,sex:e.input.sex}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS&&"1"==e.have_translate_user?n.path("interpreter_list").search("order_id",e.orders_id):n.path("self_booking").search("order_id",e.orders_id)})}}]),angular.module("Uelives").controller("editWorkExprienceController",["$scope","$routeParams","$filter","$rootScope","$timeout","$location","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c,s,l){e.input={},e.input.remove_id=t.id,e.input.start_time_option={placeholder:"入职年月/项目开始年月",theme:"month"},e.input.end_time_option={placeholder:"离职年月/项目结束年月",theme:"month"},e.checkText=function(){e.input.duty.length>40&&(u.autoHide("输入字数不能超过40个"),e.input.duty=e.input.duty.substr(0,40))},s.get("cache")&&(e.input=angular.extend({},e.input,s.get("cache"))),e.query_work_experience=function(){c.show(),a.query_work_experience({user_work_experience_id:t.id}).then(function(t){c.hide(),t.code==l.request.SUCCESS&&t.status==l.response.SUCCESS?(e.input.start_time=t.Result.UserWorkExperience.start_time||"",e.input.end_time=t.Result.UserWorkExperience.end_time||"",e.input.work_name=t.Result.UserWorkExperience.work_name||"",e.input.position=t.Result.UserWorkExperience.position||"",e.input.duty=t.Result.UserWorkExperience.duty||"",e.input.working_type=t.Result.UserWorkExperience.working_scene||"",s.get("cache")&&(e.input=angular.extend({},e.input,s.get("cache"))),e.input.start_time_option.value=e.input.start_time,e.input.end_time_option.value=e.input.end_time):u.autoHide(t.message)})},e.ajaxForm=function(){return t.id?(e.update(),void 0):(e.create(),void 0)},e.create=function(){c.show(),a.create_work_experience({start_time:e.input.start_time_option.value,end_time:e.input.end_time_option.value,work_name:e.input.work_name,position:e.input.position,duty:e.input.duty,working_scene:e.input.working_type}).then(function(e){c.hide(),s.remove("cache"),e.code==l.request.SUCCESS&&e.status==l.response.SUCCESS?(u.autoHide(e.message),r(function(){o.back()},2e3)):u.autoHide(e.message)})},e.update=function(){c.show(),a.update_work_experience({user_work_experience_id:t.id,start_time:e.input.start_time_option.value,end_time:e.input.end_time_option.value,work_name:e.input.work_name,position:e.input.position,duty:e.input.duty,working_scene:e.input.working_type}).then(function(e){c.hide(),s.remove("cache"),e.code==l.request.SUCCESS&&e.status==l.response.SUCCESS?(u.autoHide(e.message),r(function(){o.back()},2e3)):u.autoHide(e.message)})},e.remove=function(){c.show(),a.remove_work_experience({user_work_experience_id:t.id}).then(function(e){c.hide(),e.code==l.request.SUCCESS&&e.status==l.response.SUCCESS?(u.autoHide(e.message),r(function(){o.back()},2e3)):u.autoHide(e.message)})},e.cache_and_go=function(t,n){s.set("cache",e.input),i.path(t).search({cache_key:n,from:"edit"})},e.toggle_nowaday=function(){e.input.end_time_option.value="至今"==e.input.end_time_option.value?n("date")(new Date,"yyyy-MM"):"至今"},e.replace_hash=function(e){return e&&e.replace(/#/g,"、")},e.valid_time=function(e){return e?"Invalid Date"==new Date(e)?!1:!0:!0},t.id&&e.query_work_experience()}]),angular.module("Uelives").controller("editEduExprienceController",["$scope","$routeParams","$filter","$rootScope","$timeout","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,a,u,c,s,l){for(e.input={year:"",degree:""},e.input.remove_id=t.id,e.year=parseFloat(n("date")(new Date,"yyyy")),e.years=["至今"],i=0;50>i;i++)e.years.push(e.year+"年"),e.year--;e.degrees=["专科","本科","硕士","博士","博士后"],e.query_edu_experience=function(){c.show(),a.query_edu_experience({user_edu_experience_id:t.id}).then(function(t){c.hide(),t.code==l.request.SUCCESS&&t.status==l.response.SUCCESS?(e.input.year=t.Result.UserEduExperience.end_time,e.input.school_name=t.Result.UserEduExperience.school_name,e.input.degree=t.Result.UserEduExperience.education,e.input.major=t.Result.UserEduExperience.profession):u.autoHide(t.message)})},e.ajaxForm=function(){return t.id?(e.update(),void 0):(e.create(),void 0)},e.create=function(){c.show(),a.create_edu_experience({end_time:e.input.year,school_name:e.input.school_name,education:e.input.degree,profession:e.input.major}).then(function(e){c.hide(),e.code==l.request.SUCCESS&&e.status==l.response.SUCCESS?(u.autoHide(e.message),r(function(){o.back()},2e3)):u.autoHide(e.message)})},e.update=function(){c.show(),a.update_edu_experience({user_edu_experience_id:t.id,end_time:e.input.year,school_name:e.input.school_name,education:e.input.degree,profession:e.input.major}).then(function(e){c.hide(),e.code==l.request.SUCCESS&&e.status==l.response.SUCCESS?(u.autoHide(e.message),r(function(){o.back()},2e3)):u.autoHide(e.message)})},e.remove=function(){c.show(),a.remove_edu_experience({user_edu_experience_id:t.id}).then(function(e){c.hide(),e.code==l.request.SUCCESS&&e.status==l.response.SUCCESS?(u.autoHide(e.message),r(function(){o.back()},2e3)):u.autoHide(e.message)})},t.id&&e.query_edu_experience()}]),angular.module("Uelives").controller("editBasicInfoController",["$scope","$rootScope","$timeout","$location","$filter","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c,s){e.input={translate_year:"",options:{}},u.show(),i.query_basicinfo({type:"1"}).then(function(t){if(u.hide(),t.code==s.request.SUCCESS&&t.status==s.response.SUCCESS){e.user=t.Result.UserInfo,e.input.nickname=e.user.nickname||"",e.input.wechat=e.user.weChat||"",e.input.sex=e.user.sex||"",e.input.degree=e.user.edu||"",e.input.birthday=e.user.birthday||"",e.input.city=e.user.city||"",e.input.telephone=e.user.telephone||"",e.input.email=e.user.email||"",e.input.job_type=e.user.job_type||"",e.input.job_property=e.user.job_property||"",e.input.mother_language=e.user.mother_language||"",e.input.first_language=e.user.first_language||"",e.input.first_language_level=e.user.first_language_level||"",e.input.second_language=e.user.second_language||"",e.input.second_language_level=e.user.second_language_level||"",e.input.good_at=e.user.good_field||"",e.input.translate_year=e.user.translate_year||"",e.input.translate_level=e.user.translate_level||"",e.input.pay_day=e.user.pay_day||"",e.input.pay_day_example=r("currency")(t.average_pay_day||"0","￥"),e.input.options.value=e.user.birthday;var n=e.input.job_type.split("#"),o=e.input.job_property.split("#");e.input.job_types.map(function(e){return n.includes(e.name)&&(e.selected=!0),e}),e.input.job_propertys.map(function(e){return o.includes(e.name)&&(e.selected=!0),e}),c.get("cache")&&(e.input=angular.extend({},e.input,c.get("cache")),console.log(e.input)),c.set("user_id",e.user.user_id)}else a.autoHide(t.message)}),e.input.job_types=[{name:"口译",selected:!1},{name:"笔译",selected:!1},{name:"口笔译",selected:!1}],e.input.job_propertys=[{name:"全职",selected:!1},{name:"兼职",selected:!1},{name:"实习",selected:!1}],e.degrees=["大专","本科","硕士","博士"],e.translate_years=["1年","2年","3年","4年","5年","6年","7年","8年","9年","10年","10年以上"],e.agree=!1,e.is_agree=function(){e.agree=!e.agree},e.single_check=function(t,n){e.input[t]=n},e.multi_check=function(e){return e.selected=!e.selected},e.replace_hash=function(e){return e&&e.replace(/#/g,"、")},e.cache_and_go=function(t,n){console.log(e.input),c.set("cache",e.input),o.path(t).search("cache_key",n)},e.input.flow={},e.update_avatar=function(){u.show(),i.update_avatar({fileName:e.input.flow.opts.query.filename}).then(function(e){u.hide(),e.code==s.request.SUCCESS&&e.status==s.response.SUCCESS?a.autoHide(e.message):a.autoHide(e.message)})},e.ajaxForm=function(){u.show(),i.update_userinfo({fileName:e.user.image_01,nickname:e.input.nickname,weChat:e.input.wechat,sex:e.input.sex,edu:e.input.degree,birthday:e.input.options.value,city:e.input.city,email:e.input.email,job_type:e.input.job_types.filter(function(e){return e.selected}).map(function(e){return e.name}).join("#"),job_property:e.input.job_propertys.filter(function(e){return e.selected}).map(function(e){return e.name}).join("#"),mother_language:e.input.mother_language,first_language:e.input.first_language,first_language_level:e.input.first_language_level,second_language:e.input.second_language,second_language_level:e.input.second_language_level,good_field:e.input.good_at,translate_year:e.input.translate_year,translate_level:e.input.translate_level,pay_day:e.input.pay_day}).then(function(e){u.hide(),c.remove("cache"),e.code==s.request.SUCCESS&&e.status==s.response.SUCCESS?(a.autoHide(e.message),n(function(){t.back()},2e3)):a.autoHide(e.message)})}}]),angular.module("Uelives").controller("countryCodeController",["$scope","$rootScope","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a){e.input={},i.show(),o.query_country_code().then(function(t){i.hide(),e.country_codes=t});var u=a.get("cache");u&&u[n.cache_key]&&(e.input.country_code=u[n.cache_key]),e.select_country_code=function(n){e.input.country_code=n,a.set("cache",angular.extend({},u,e.input)),t.back()}}]),angular.module("Uelives").controller("choiceTimeController",["$scope","$rootScope","$routeParams","$timeout","$route","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u,c,s){var l=c.get("cache");e.user_id=n.id,e.input={},u.show(),i.query_schedule({user_id:n.id||"0"}).then(function(t){u.hide(),t.code==s.request.SUCCESS&&t.status==s.response.SUCCESS?(e.schedules=t.calendarBeans,e.schedule_init()):a.autoHide(t.message)}),e.schedule_init=function(){angular.forEach(e.schedules,function(e){angular.forEach(e.scheduleBeans,function(e){l[n.cache_key]&&l[n.cache_key].includes(e.schedule_date)&&(e.schedule_state=4)})})},e.parse_time=function(e){return e.schedule_date.split("-")[2]},e.append_class=function(e,t){return 0==t?"margin-left-"+e.week:void 0},e.active=function(e){return e.schedule_state<3?void 0:3==e.schedule_state?e.schedule_state=4:4==e.schedule_state?e.schedule_state=3:void 0},e.confirm_time=function(){var o=[];return angular.forEach(e.schedules,function(e){o=o.concat(e.scheduleBeans)}),o=o.filter(function(e){return 4==e.schedule_state}).map(function(e){return e.schedule_date}),0==o.length?(a.autoHide("请选择时间"),void 0):(l&&n.cache_key&&(l[n.cache_key]=o,c.set("cache",l)),t.back(),void 0)}}]),angular.module("Uelives").controller("choiceLanguageController",["$scope","$rootScope","$timeout","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u){e.input={},e.input.language={from:"中文",to:""};var c=u.get("cache");c&&c[o.cache_key]&&(e.input.language=c[o.cache_key]),e.input.choice="0",r.query_language().then(function(t){e.languages=t}),e.query_language=function(t){e.input.choice=t},e.select_language=function(n){e.input.tag=n,"0"==e.input.choice&&(e.input.language.to=n),"1"==e.input.choice&&(e.input.language.from=n,e.input.choice="0"),e.input.language.from&&e.input.language.to&&(c[o.cache_key]=e.input.language,u.set("cache",c),t.back())},e.query_inter_language=function(t){r.query_language().then(function(t){e.languages=t}),e.input.choice=t},e.parse_key=function(e){return e.substring(0,2)}}]),angular.module("Uelives").controller("choiceCityController",["$scope","$routeParams","$rootScope","$timeout","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,i,a,u){e.input={},e.input.tag=u.get("city")||"",e.input.choice="1",e.select_city=function(o){e.input.tag=o;var r=u.get("cache");r&&t.cache_key&&(r[t.cache_key]=o,u.set("cache",r)),n.back()},e.query_city=function(t){a.show(),r.query_city().then(function(t){a.hide(),e.cities=t}),e.input.choice=t},e.query_inter_city=function(t){a.show(),r.query_inter_city().then(function(t){a.hide(),e.cities=t}),e.input.choice=t},e.query_city(1),e.parse_key=function(e){return e.substring(0,2)}}]),angular.module("Uelives").controller("certificateController",["$scope","$routeParams","$filter","$rootScope","$timeout","$location","userServices","errorServices","toastServices","localStorageService","config",function(e,t,n,o,r,a,u,c,s,l,d){for(e.input={time_option:""},e.input.remove_id=t.id,e.time_option=parseFloat(n("date")(new Date,"yyyy")),e.time_options=[],i=0;50>i;i++)e.time_options.push(e.time_option+"年"),e.time_option--;e.query_cert_experience=function(){s.show(),u.query_cert_experience({user_identity_id:t.id}).then(function(t){s.hide(),t.code==d.request.SUCCESS&&t.status==d.response.SUCCESS?(e.input.get_time=t.Result.UserIdentity.get_time,e.input.title=t.Result.UserIdentity.title,e.input.image_01=t.Result.UserIdentity.image_01,e.input.time_option=e.input.get_time):c.autoHide(t.message)})},e.ajaxForm=function(){return t.id?(e.update(),void 0):(e.create(),void 0)},e.input.flow={},e.create=function(){s.show(),u.create_cert_experience({fileName:e.input.flow.opts.query.filename,title:e.input.title,get_time:e.input.time_option}).then(function(e){s.hide(),e.code==d.request.SUCCESS&&e.status==d.response.SUCCESS?(c.autoHide(e.message),r(function(){o.back()},2e3)):c.autoHide(e.message)})},e.update=function(){e.input.image_01=e.input.flow.opts.query.filename||e.input.image_01,s.show(),u.update_cert_experience({user_identity_id:t.id,fileName:e.input.image_01,title:e.input.title,get_time:e.input.time_option}).then(function(e){s.hide(),e.code==d.request.SUCCESS&&e.status==d.response.SUCCESS?(c.autoHide(e.message),r(function(){o.back()},2e3)):c.autoHide(e.message)})},e.remove=function(){s.show(),u.remove_cert_experience({user_identity_id:t.id}).then(function(e){s.hide(),e.code==d.request.SUCCESS&&e.status==d.response.SUCCESS?(c.autoHide(e.message),r(function(){o.back()},2e3)):c.autoHide(e.message)})},t.id&&e.query_cert_experience()}]),angular.module("Uelives").controller("bookingDateController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Uelives").constant("config",{url:"http://www.uelives.com",imageUrl:"http://www.uelives.com/files/image?name=",request:{SUCCESS:"200",TOKEN_INVALID:"405"},response:{SUCCESS:1},common_params:{invoke:"h5",app_sign:"123456"},interceptor:["index","booking_date","choice_city","choice_language","choice_time","edit_basic_info","edit_edu_exprience","edit_work_exprience","interpreter_detail","interpreter_level","interpreter_list","interpreter_evaluate","interpreter_settled","online_booking","online_preview","working_type","schedule","schedule_preview","order_management_interpreter","order_management_user","order","order_cancel","order_confirm","order_finish","order_wait","languages","related_industry","self_booking","information","scenes","certificate","preview_comment","country_code","money","update_telephone"]});
//# sourceMappingURL=app.min.js.map
